<div class="py-5">

  <div class="container">

    <div class="row d-flex justify-content-center text-center">
      <img src="{{ user.image_base64 }}"
           style="width: 10vw; height: 9vw; object-fit: cover"
           class="rounded-circle" alt="">
      <h2 class="cover-heading pt-2">{{ user.name }}</h2>
      <p class="text-secondary cover-heading mb-5">{{at}}{{ user.username }}</p>

<!--      {% if user not in  followers %}<button type="submit" class="btn btn-primary" name="follow">{% bs_icon 'person-plus-fill' %} Follow</button>-->
<!--      {% else %}<button type="submit" class="btn btn-secondary" name="unfollow">{% bs_icon 'person-dash-fill' %} Unfollow</button>{% endif %}-->
      <div class="mb-2" style="margin-top: -30px" *ngIf="!isFollowing">
        <button type="submit" class="btn btn-primary" name="follow" (click)="followUser()"><i class="bi bi-person-add"></i> Follow</button>
      </div>
      <div class="mb-2" style="margin-top: -30px" *ngIf="isFollowing">
        <button type="submit" class="btn btn-secondary" name="unfollow" (click)="unfollowUser()"><i class="bi bi-person-dash"></i> UnFollow</button>
      </div>

      <p class="lead">Followers <b>{{ followers }}</b> | Following <b>{{ following }}</b></p>
    </div>
    <div class="row">
      <ng-container *ngFor="let product of products">
        <div class="col-md-4 mt-5">
          <div class="card h-100 border-0 rounded-0 shadow" style="width: 25rem;">
            <img src="{{ product.image }}" class="card-img-top rounded-0" alt="...">
            <div class="card-body d-flex flex-column mt-3 mb-3">
              <div class="row mt-auto">
                <div class="col-10">
                  <h4 class="card-title">{{ product.name }}</h4>
                  <p class="card-text text-muted" style="display: flex; align-items: center">
                    {{product.description }}
                  </p>
                </div>
              </div>
            </div>
            <div class="row align-items-center text-center g-0">
              <div class="col-4">
                <h5>{{ product.price }}â‚¬</h5>
              </div>
              <div class="col-4">
                <a routerLink="/product/{{ product.id }}" class="btn btn-info w-100 p-3 rounded-0 text-center">
                  <i class="bi bi-eye me-2"></i>
                  <span class="align-middle">View</span>
                </a>
              </div>
              <div class="col-4" *ngIf="product.favorite">
                <button type="button" id="fav_{{ product.id }}" data-value="{{ product.id }}" class="favorite btn btn-danger w-100 p-3 rounded-0 text-center" (click)="changeFav($event)"><i class="bi bi-heart"></i></button>
              </div>
              <div class="col-4" *ngIf="!product.favorite">
                <button type="button" id="fav_{{ product.id }}" data-value="{{ product.id }}" class="favorite btn btn-outline-danger w-100 p-3 rounded-0 text-center" (click)="changeFav($event)"><i class="bi bi-heart"></i></button>
              </div>
            </div>
          </div>
        </div>
      </ng-container>


      </div>
        <div class="row d-flex justify-content-center mt-5">
          <div class="card shadow-0 border" style="background-color: #f0f2f5;">
            <div class="card-body p-4">
              <div class="form-outline mb-4">
                <form action="." method="post">
                  <textarea type="text" id="comment" name="comment" class="form-control" placeholder="Write a comment..."
                         style="height: 120px;resize: none"></textarea>

                  <div class="rating">
                    <input type="radio" id="star5" name="rating_input" value="5">
                    <label for="star5" title="5 stars"></label>
                    <input type="radio" id="star4" name="rating_input" value="4">
                    <label for="star4" title="4 stars"></label>
                    <input type="radio" id="star3" name="rating_input" value="3">
                    <label for="star3" title="3 stars"></label>
                    <input type="radio" id="star2" name="rating_input" value="2">
                    <label for="star2" title="2 stars"></label>
                    <input type="radio" id="star1" name="rating_input" value="1">
                    <label for="star1" title="1 star"></label>
                  </div>
                  <div>
                    <input style="margin-top: 10px" type="submit" class="btn btn-primary" value="Post Comment">
                  </div>
                </form>
              </div>
              <ng-container *ngFor="let comment of comments">
              <div class="card mb-4">
                <div class="card-body">
                  <div class="d-flex justify-content-between">
                    <p>{{ comment.text }}</p>
                    <ng-container *ngIf="comment.alter">
                      <button type="submit" class="btn btn-danger"><i class="bi bi-trash"></i></button>
                    </ng-container>
                  </div>
                  <div class="d-flex justify-content-between">
                    <div class="d-flex flex-row align-items-center">
                      <img src="{{ comment.image }}" alt="avatar" style="height: 25px; width: 25px; object-fit: cover" />
                      <p class="small mb-0 ms-2">{{ comment.name }}</p>
                    </div>
                    <div class="d-flex flex-row align-items-center">
                      <ng-container *ngIf="comment.rating == 1">
                        <i class="bi bi-star-fill"></i>
                      </ng-container>
                      <ng-container *ngIf="comment.rating == 2">
                        <i class="bi bi-star-fill"></i>
                        <i class="bi bi-star-fill"></i>
                      </ng-container>
                      <ng-container *ngIf="comment.rating == 3">
                        <i class="bi bi-star-fill"></i>
                        <i class="bi bi-star-fill"></i>
                        <i class="bi bi-star-fill"></i>
                      </ng-container>
                      <ng-container *ngIf="comment.rating == 4">
                        <i class="bi bi-star-fill"></i>
                        <i class="bi bi-star-fill"></i>
                        <i class="bi bi-star-fill"></i>
                        <i class="bi bi-star-fill"></i>
                      </ng-container>
                      <ng-container *ngIf="comment.rating == 5">
                        <i class="bi bi-star-fill"></i>
                        <i class="bi bi-star-fill"></i>
                        <i class="bi bi-star-fill"></i>
                        <i class="bi bi-star-fill"></i>
                        <i class="bi bi-star-fill"></i>
                      </ng-container>
                    </div>
                  </div>
                </div>
              </div>
              </ng-container>
            </div>
          </div>

      </div>
    </div>
  </div>
